"0","source(""~/Dropbox/Worm/Codes/Connectome/connectome-utils.R"") "
"0","rdir <- ""right brain/"""
"0","ldir <- ""left brain/"""
"0","#dname <- ""~/Dropbox/Worm/Codes/Connectome/roundone/"""
"0","dname <- paste0(""~/Dropbox/Worm/Codes/Connectome/roundtwo/"",data.type,""-KC/"",sep="""")"
"0","rfiles <- list.files(paste0(dname,rdir))"
"0","lfiles <- list.files(paste0(dname,ldir))"
"0","rnames <- as.character(sapply(sapply(rfiles, strsplit, "" ""),""["",1))"
"0","lnames <- as.character(sapply(sapply(lfiles, strsplit, "" ""),""["",1))"
"0","stopifnot(identical(rnames,lnames))"
"0","rdat <- ldat <- vector(""list"",length(rfiles))"
"0","names(rdat) <- names(ldat) <- rnames"
"0","for (i in 1:length(rfiles)) {"
"0","#    rdat[[i]] <- read.xlsx(paste0(dname,rdir,rfiles[[i]]),colNames=TRUE,rowNames=TRUE)"
"0","#    ldat[[i]] <- read.xlsx(paste0(dname,ldir,lfiles[[i]]),colNames=TRUE,rowNames=TRUE)"
"0","    rdat[[i]] <- read.csv(paste0(dname,rdir,rfiles[[i]]),check.names=FALSE,row.names=1)"
"0","    ldat[[i]] <- read.csv(paste0(dname,ldir,lfiles[[i]]),check.names=FALSE,row.names=1)"
"0","    ## remove PNs that make 0 synapses onto KCs from both the"
"0","    ## left and right PN-KC matrix"
"0","    if (i == which(names(rdat)==paste0(""PN-to-KC-"",data.type))) {"
"0","        r0 <- which(rowSums(rdat[[i]])==0)"
"0","        l0 <- which(rowSums(ldat[[i]])==0)"
"0","        if (length(r0) != 0) rdat[[i]] <- rdat[[i]][-r0,]"
"0","        if (length(l0) != 0) ldat[[i]] <- ldat[[i]][-l0,]"
"0","    }"
"0","        "
"0","    tmp <- cleanNames(rdat[[i]],ldat[[i]])"
"0","    rdat[[i]] <- as.matrix(tmp$dat1)"
"0","    ldat[[i]] <- as.matrix(tmp$dat2)"
"0","    "
"0","    ## nix numbers from row/col names, except KCs"
"0","    if (!(i %in% c(1,2,3))) {"
"0","        rownames(rdat[[i]]) <- nixNum(rownames(rdat[[i]]))"
"0","        rownames(ldat[[i]]) <- nixNum(rownames(ldat[[i]]))"
"0","    }"
"0","    if (!(i %in% c(1,4,5))) {"
"0","        colnames(rdat[[i]]) <- nixNum(colnames(rdat[[i]]))"
"0","        colnames(ldat[[i]]) <- nixNum(colnames(ldat[[i]]))"
"0","    }"
"0","    "
"0","##    rownames(rdat[[i]]) <- as.character(rdat[[i]][,1])"
"0","##    colnames(rdat[[i]]) <- as.character(colnames(rdat[[i]]))"
"0","##    rdat[[i]] <- rdat[[i]][,-1]"
"0","#    print(image(Matrix(as.matrix(rdat[[i]])),main=paste0(""R : "",names(rdat[i])),colorkey=TRUE))"
"0","#    print(image(Matrix(as.matrix(ldat[[i]])),main=paste0(""L : "",names(ldat[i])),colorkey=TRUE))"
"0","}"
