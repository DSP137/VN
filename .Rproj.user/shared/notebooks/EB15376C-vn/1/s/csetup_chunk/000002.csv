"0","#<link rel=""stylesheet"" href=""http://vis.supstat.com/assets/themes/dinky/css/scianimator.css"">"
"0","#<script src=""https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js""></script>"
"0","#<script src=""http://vis.supstat.com/assets/themes/dinky/js/jquery.scianimator.min.js""></script>"
"0","suppressMessages(require(igraph))"
"0","suppressMessages(require(VN))"
"0","suppressMessages(require(Matrix))"
"0","suppressMessages(require(lattice))"
"0","suppressMessages(require(popbio))"
"0","suppressMessages(require(ggplot2))"
"0","suppressMessages(require(reshape2))"
"0","suppressMessages(require(knitr))"
"0","suppressMessages(require(printr))"
"0","suppressMessages(require(dplyr))"
"0","options(digits = 2)"
"0","source(""~/Dropbox/SGM/nbdmaking/vn.R"")"
"0","#knitr::opts_chunk$set(cache=TRUE, autodep=TRUE)"
"0","#dep_auto() # figure out dependencies automatically"
"0","opts_chunk$set(cache=FALSE,echo=TRUE,eval=TRUE,warning=FALSE,message=FALSE,comment=""#"","
"0","               dpi=100,dev=c('png','pdf'))"
"0","opts_knit$set(aliases=c(h='fig.height', w='fig.width', cap='fig.cap', scap='fig.scap'))     "
"0","opts_knit$set(eval.after = c('fig.cap','fig.scap'))                                                                            "
"0","knit_hooks$set(document = function(x) {                                                                gsub('(\\\\end\\{knitrout\\}[\n]+)', '\\1\\\\noindent ', x)                                  })"
"0","opts_knit$set(animation.fun = hook_scianimator)"
"0","#knit_hooks$set(plot = function(x, options) {"
"0","#       paste('<figure><img src=""',"
"0","#             opts_knit$get('base.url'), paste(x, collapse = '.'),"
"0","#             '""><figcaption>', options$fig.cap, '</figcaption></figure>',"
"0","#             sep = '')"
"0","# })"
"0"," fn = local({"
"0","   i = 0"
"0","   function(x) {"
"0","     i <<- i + 1"
"0","#     paste('Figure ', i, ': ', x, sep = '')"
"0","     paste('', '', x, sep = '')"
"0","   }"
"0"," })"
"0","rmd.convert <- function(fname, output=c('latex', 'word', 'html', ""pdf"")){"
"0","  ## Thanks to Robert Musk for helpful additions to make this run better on Windows"
"0","  require(knitr)"
"0","  require(tools)"
"0","  "
"0","  thedir <- file_path_as_absolute(dirname(fname))"
"0","  thefile <- (basename(fname)) "
"0","  "
"0","  create_latex <- function(f){"
"0","    knit(f, 'tmp-outputfile.md'); "
"0","    newname <- paste0(file_path_sans_ext(f), "".tex"")"
"0","    mess <- paste('pandoc -f markdown -t latex -s -o', shQuote(newname), "
"0","                  ""tmp-outputfile.md"")"
"0","    system(mess)"
"0","    cat(""The Latex file is"", file.path(thedir, newname), "
"0","        ""\nIf transporting do not forget to include the folder"", file.path(thedir, ""figure""), ""\n"")"
"0","    mess <- paste('rm tmp-outputfile.md')"
"0","    system(mess)"
"0","  }"
"0","  create_word <- function(f){"
"0","    knit(f, 'tmp-outputfile.md');"
"0","    newname <- paste0(file_path_sans_ext(f),"".docx"")"
"0","    mess <- paste('pandoc -f markdown -t docx -o', shQuote(newname), ""tmp-outputfile.md"")"
"0","    system(mess)"
"0","    cat(""The Word (docx) file is"", file.path(thedir, newname), ""\n"")"
"0","    mess <- paste('rm tmp-outputfile.md')"
"0","    system(mess)"
"0","  }"
"0","  "
"0","  create_html <- function(f){"
"0","    knit2html(f)"
"0","    cat(""The main HTML file is"", file.path(thedir, paste0(file_path_sans_ext(f), "".html"")), "
"0","        ""\nIf transporting do not forget to include the folder"", file.path(thedir, ""figure""), ""\n"")"
"0","  }"
"0","  create_pdf <- function(f){"
"0","    knit(f, 'tmp-outputfile.md');"
"0","    newname <- paste0(file_path_sans_ext(f),"".pdf"")"
"0","    mess <- paste('pandoc -f markdown -o', shQuote(newname), ""tmp-outputfile.md"")"
"0","    system(mess)"
"0","    cat(""The PDF file is"", file.path(thedir, newname), ""\n"")"
"0","    mess <- paste('rm tmp-outputfile.md')"
"0","    system(mess)"
"0","  }"
"0","  origdir <- getwd()  "
"0","  tryCatch({"
"0","    setwd(thedir) ## put us next to the original Rmarkdown file"
"0","    out <- match.arg(output)"
"0","    switch(out,"
"0","      latex=create_latex(thefile),"
"0","      html=create_html(thefile),"
"0","      pdf=create_pdf(thefile),"
"0","      word=create_word(thefile)"
"0","    )}, finally=setwd(origdir))"
"0","  "
"0","}"
"0","##################"
"0","rmarkdownTable <- function(df) {"
"0","    cat(paste(names(df), collapse = ""|""))"
"0","    cat(""\n"")"
"0","    cat(paste(rep(""-"", ncol(df)), collapse = ""|""))"
"0","    cat(""\n"")"
"0","    for(i in 1:nrow(df)){"
"0","        cat(paste(df[i,], collapse = ""|""))"
"0","        cat(""\n"")"
"0","    }"
"0","    invisible(NULL)"
"0","}"
"0","#require(xtable)"
"0","#tab <- xtable(head(iris),digits=2)"
"0","#print(tab, type=""html"")"
"0","#(http://www.cis.jhu.edu/~parky/XDATA/SGM/27SGM_for_VN_20160518.pdf) "
